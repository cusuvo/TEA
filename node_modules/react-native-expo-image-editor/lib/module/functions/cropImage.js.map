{"version":3,"sources":["cropImage.ts"],"names":["ImageManipulator","makeCrop","uri","bounds","saveOptions","height","width","manipulateAsync","crop","base64","cropImage","bounding","Promise","resolve","uriCroped","croppedWidth","croppedHeight","originX","originY","actualSize"],"mappings":"AAAA;AAEA,OAAO,KAAKA,gBAAZ,MAAkC,wBAAlC;;AAGA,eAAeC,QAAf,CACEC,GADF,EAEEC,MAFF,EAGEC,WAHF,EAIyC;AACvC,MAAID,MAAM,CAACE,MAAP,GAAgB,CAAhB,IAAqBF,MAAM,CAACG,KAAP,GAAe,CAAxC,EAA2C;AACzC,WAAO,MAAMN,gBAAgB,CAACO,eAAjB,CACXL,GADW,EAEX,CACE;AACEM,MAAAA,IAAI,EAAEL;AADR,KADF,CAFW,EAOXC,WAPW,CAAb;AASD;;AACD,SAAO;AACLF,IAAAA,GAAG,EAAE,EADA;AAELO,IAAAA,MAAM,EAAE,EAFH;AAGLH,IAAAA,KAAK,EAAE,CAHF;AAILD,IAAAA,MAAM,EAAE;AAJH,GAAP;AAMD;;AAQD;AACA;AACA;AACA;AACA;AAEA,eAAe,SAASK,SAAT,CACbR,GADa,EAEbS,QAFa,EAGbP,WAHa,EAIc;AAC3B,SAAO,IAAIQ,OAAJ,CAAY,MAAOC,OAAP,IAAmB;AACpC,UAAM;AACJX,MAAAA,GAAG,EAAEY,SADD;AAEJL,MAAAA,MAFI;AAGJH,MAAAA,KAAK,EAAES,YAHH;AAIJV,MAAAA,MAAM,EAAEW;AAJJ,QAKF,MAAMf,QAAQ,CAChBC,GADgB,EAEhB;AACEe,MAAAA,OAAO,EAAEN,QAAQ,CAACM,OADpB;AAEEC,MAAAA,OAAO,EAAEP,QAAQ,CAACO,OAFpB;AAGEZ,MAAAA,KAAK,EAAEK,QAAQ,CAACL,KAHlB;AAIED,MAAAA,MAAM,EAAEM,QAAQ,CAACN;AAJnB,KAFgB,EAQhBD,WARgB,CALlB;AAeAS,IAAAA,OAAO,CAAC;AACNM,MAAAA,UAAU,EAAE;AACVb,QAAAA,KAAK,EAAES,YADG;AAEVV,QAAAA,MAAM,EAAEW;AAFE,OADN;AAKNd,MAAAA,GAAG,EAAEY,SALC;AAMNL,MAAAA;AANM,KAAD,CAAP;AAQD,GAxBM,CAAP;AAyBD","sourcesContent":["// cropImage.ts\n\nimport * as ImageManipulator from 'expo-image-manipulator';\nimport type { Size, BoundSize } from '../types/cropImage';\n\nasync function makeCrop(\n  uri: string,\n  bounds: BoundSize,\n  saveOptions: ImageManipulator.SaveOptions\n): Promise<ImageManipulator.ImageResult> {\n  if (bounds.height > 0 && bounds.width > 0) {\n    return await ImageManipulator.manipulateAsync(\n      uri,\n      [\n        {\n          crop: bounds,\n        },\n      ],\n      saveOptions\n    );\n  }\n  return {\n    uri: '',\n    base64: '',\n    width: 0,\n    height: 0,\n  };\n}\n\ntype CroppedImageType = {\n  actualSize: Size;\n  uri: string;\n  base64: string | undefined;\n};\n\n// const options = {\n//   compress: 1,\n//   format: ImageManipulator.SaveFormat.PNG,\n//   base64: false,\n// };\n\nexport default function cropImage(\n  uri: string,\n  bounding: any,\n  saveOptions: ImageManipulator.SaveOptions\n): Promise<CroppedImageType> {\n  return new Promise(async (resolve) => {\n    const {\n      uri: uriCroped,\n      base64,\n      width: croppedWidth,\n      height: croppedHeight,\n    } = await makeCrop(\n      uri,\n      {\n        originX: bounding.originX,\n        originY: bounding.originY,\n        width: bounding.width,\n        height: bounding.height,\n      },\n      saveOptions\n    );\n    resolve({\n      actualSize: {\n        width: croppedWidth,\n        height: croppedHeight,\n      },\n      uri: uriCroped,\n      base64,\n    });\n  });\n}\n"]}