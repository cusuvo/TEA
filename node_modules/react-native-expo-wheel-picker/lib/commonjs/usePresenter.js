"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = usePresenter;

var _react = require("react");

var _findIndex = _interopRequireDefault(require("lodash/findIndex"));

var _isUndefined = _interopRequireDefault(require("lodash/isUndefined"));

var _constant = require("./constant");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// src/usePresenter.ts
function usePresenter(_ref) {
  let {
    initialValue,
    items: propItems,
    valueAttribute,
    labelAttribute,
    numberOfVisibleRows
  } = _ref;
  const items = propItems.map(item => {
    return {
      value: item[valueAttribute],
      label: item[labelAttribute]
    };
  });
  const defaultIndex = (0, _isUndefined.default)(initialValue) ? 0 : (0, _findIndex.default)(items, {
    value: initialValue
  });
  const [currentIndex, setCurrentIndex] = (0, _react.useState)(defaultIndex);
  const onValueChange = (0, _react.useCallback)(event => {
    setCurrentIndex(Math.floor(event.nativeEvent.contentOffset.y / _constant.itemHeight));
  }, []);

  const getRowItemByIndex = index => {
    return items[index];
  };

  return {
    items,
    onValueChange,
    currentIndex,
    defaultIndex: defaultIndex > -1 ? defaultIndex : 0,
    getRowItemByIndex,
    height: numberOfVisibleRows * _constant.itemHeight
  };
}
//# sourceMappingURL=usePresenter.js.map